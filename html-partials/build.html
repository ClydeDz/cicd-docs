<script id="buildPartial" type="text/x-mustache">
    <div class="container container-fluid">
        <div class="row">
            <div class="col-xs-12 col-md-8">
                <div class="card">
                    <h2>{{ name }}</h2>
                    <p>
                        <img src="{{ repository.icon }}" id="repositoryIcon" alt="{{ repository.name }}" onerror="errorLoadingRepositoryIcon(this);" width="24" />
                        <a href="{{ repository.url }}">{{ repository.name }}</a>
                        &nbsp;
                        <img src="/images/extend/platforms/vsts/icon.png" id="platformVstsIcon" alt="{{ project.name }}" width="24" />
                        <a href="{{ project.url }}">{{ project.name }}</a>
                    </p>
                    <p>Project description: {{ project.description }}</p>
                    <div>
                        {{#process}}
                        <div>
                            <p><b>Phase name: {{ name }}</b><br /></p>
                            <div class="row">
                                <div class="col-xs-3">
                                    {{#isExecutionTypeParallelismNone}}
                                    <small> <i class="mdi mdi-run text-muted"></i> Parallelism: None</small>
                                    {{/isExecutionTypeParallelismNone}}

                                    {{#isExecutionTypeParallelismMultiConfig}}
                                    <small> <i class="mdi mdi-run text-muted"></i> Parallelism: Multi-config</small>
                                    {{/isExecutionTypeParallelismMultiConfig}}

                                    {{#isExecutionTypeParallelismMultiAgent}}
                                    <small> <i class="mdi mdi-run text-muted"></i> Parallelism: Multi-agent</small>
                                    {{/isExecutionTypeParallelismMultiAgent}}
                                </div>
                                <div class="col-xs-3">
                                    {{#isPhaseAgentful}}
                                    <small> <i class="mdi mdi-server-off text-muted"></i> Runs on agent</small>
                                    {{/isPhaseAgentful}}

                                    {{#isPhaseAgentless}}
                                    <small> <i class="mdi mdi-server text-muted"></i> Runs on server</small>
                                    {{/isPhaseAgentless}}
                                </div>
                            </div>
                            {{#steps}}
                            <div id="step-{{id}}" class="row">
                                <div class="col-xs-1">
                                    <img alt="{{ name }}" src="{{icon}}" id="stepIcon-{{id}}" width="32" onerror="errorLoadingImage(this);" />
                                </div>
                                <div class="col-xs-8">
                                    {{ name }}<br />
                                    <small class="text-muted">Version: {{ version }}</small>
                                </div>
                                <div class="col-xs-1">
                                    {{#enabled}}
                                    <i class="mdi mdi-checkbox-marked-circle mdi-24px text-success"></i>
                                    {{/enabled}}
                                    {{^enabled}}
                                    <i class="mdi mdi-checkbox-marked-circle mdi-24px text-muted"></i>
                                    {{/enabled}}
                                </div>
                                <div class="col-xs-1">
                                    {{#continueOnError}}
                                    <i class="mdi mdi-alert-circle mdi-24px text-danger"></i>
                                    {{/continueOnError}}
                                    {{^continueOnError}}
                                    <i class="mdi mdi-alert-circle mdi-24px text-muted"></i>
                                    {{/continueOnError}}
                                </div>
                            </div>
                            {{/steps}}
                        </div>
                        {{/process}}
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <!-- At a glance -->
                <div class="card">
                    <h2>At a glance</h2>
                    <div class="row text-center">
                        <div class="col-xs-4">
                            <div class="text-center"><i class="mdi mdi-clipboard-check mdi-24px"></i> 2</div>
                            <div class="text-center">Tasks</div>
                        </div>
                        <div class="col-xs-4">
                            <div class="text-center"><i class="mdi mdi-cube mdi-24px"></i> 2</div>
                            <div class="text-center">Variables</div>
                        </div>
                        <div class="col-xs-4">
                            <div class="text-center"><i class="mdi mdi-view-sequential mdi-24px"></i> 2</div>
                            <div class="text-center">Phases</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <p><h3>Author</h3></p>
                    <p>
                        <i class="mdi mdi-account mdi-24px text-muted"></i> {{ author.displayName }}
                    </p>
                    <p>
                        <i class="mdi mdi-email mdi-24px text-muted"></i> <a href="mailto:{{ author.email }}">{{ author.email }}</a>
                    </p>
                    <p>
                        <i class="mdi mdi-clock mdi-24px text-muted"></i> {{ creationDate }}
                    </p>
                </div>
                <div class="card">
                    <h3>Queue &amp; triggers</h3>
                    <p>
                        <img src="{{ queue.icon }}" alt="{{ queue.name }}" id="queueAgentIcon" onerror="errorLoadingQueueIcon(this);" width="24" /> {{ queue.displayName }}
                    </p>
                    <p>Is hosted: {{ queue.isHosted }}</p><br />
                    <p>
                        {{#triggers.continousIntegration}}
                        <i class="mdi mdi-flash mdi-24px text-warning"></i> Continous integration enabled
                        {{/triggers.continousIntegration}}
                        {{^triggers.continousIntegration}}
                        <i class="mdi mdi-flash mdi-24px text-muted"></i> Continous integration disabled
                        {{/triggers.continousIntegration}}
                    </p>
                    <p>
                        {{#triggers.batchChanges}}
                        <i class="mdi mdi-truck mdi-24px text-success"></i> Batch changes enabled while a build is in progress
                        {{/triggers.batchChanges}}
                        {{^triggers.batchChanges}}
                        <i class="mdi mdi-truck mdi-24px text-muted"></i> Batch changes disabled
                        {{/triggers.batchChanges}}
                    </p>

                </div>
                <div class="card">
                    <h3>Variables &amp; retention rules</h3>
                    <div>
                        <!-- Trigger the modal with a button -->
                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#myModal">List of variables</button>
                        <!-- Modal -->
                        <div id="myModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Variables</h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row bg-primary">
                                            <div class="col-xs-6">
                                                Variable name
                                            </div>
                                            <div class="col-xs-6">
                                                Variable value
                                            </div>
                                        </div>
                                        {{#variables}}
                                        <div class="row">
                                            <div class="col-xs-6">
                                                {{ key }}
                                            </div>
                                            <div class="col-xs-6">
                                                {{ value }}
                                            </div>
                                        </div>
                                        {{/variables}}
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Retention-->
                    <div>
                        <!-- Trigger the modal with a button -->
                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#buildRetentionRules">List of retention rules</button>
                        <!-- Modal -->
                        <div id="buildRetentionRules" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">retention rules</h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row bg-primary">
                                            <div class="col-xs-6">
                                                daysToKeep
                                            </div>
                                            <div class="col-xs-6">
                                                minimumToKeep
                                            </div>
                                        </div>
                                        {{#retention}}
                                        <div class="row">
                                            <div class="col-xs-6">
                                                {{ daysToKeep }} days to keep,
                                            </div>
                                            <div class="col-xs-6">
                                                {{ minimumToKeep }} good build.
                                            </div>
                                        </div>
                                        {{/retention}}
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>