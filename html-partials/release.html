<script id="releasePartial" type="text/x-mustache">
    <div class="container container-fluid">
        <div class="row">
            <div class="col-xs-12 col-md-8">
                <div class="card">
                    <div>
                        <h2>{{ name }}</h2> 
                        des {{ description }}<br />
                        url {{ url }}<br />
                        Version {{ metaInformation.version }}<br />
                        Version {{ metaInformation.releaseNameFormat }}<br />
                    </div>
                </div>
                <div class="card">
                    <!-- environment phases and tasks -->
                    <div class="row">
                        <div class="col-xs-6">
                            <h2>Environment</h2>
                        </div>
                        <div class="col-xs-6">
                            {{#releaseDefinitonHasMultipleEnvironments}}
                            <button class="prev btn button">Prev</button>
                            <button class="next btn button">Next</button>
                            {{/releaseDefinitonHasMultipleEnvironments}}
                        </div>
                    </div>
                    <div class="environment-slider">
                        {{#environments}}
                        <div class="row">
                            <div class="col-xs-12">
                                <h3>{{ name }}</h3>
                                <p>{{ ownerName }}</p>
                                <p>
                                    {{emailRecipients}}
                                </p>
                            </div>
                            {{#deploymentPhases}}
                            <div class="col-xs-12 phase">
                                <h3>Phase: {{ name }}</h3>
                                <div class="row phase-meta">
                                    <div class="col-xs-12">
                                        <p>{{ phaseType }}</p>
                                    </div>                                    
                                </div>                                
                                <!-- steps -->
                                <div class="steps">
                                    {{#steps}}
                                    <div id="step-{{id}}" class="row">
                                        <div class="col-xs-1">
                                            <img alt="{{ name }}" src="{{icon}}" id="stepIcon-{{id}}" width="32" onerror="errorLoadingImage(this);" />
                                        </div>
                                        <div class="col-xs-9">
                                            {{ name }}<br />
                                            <small class="text-muted">Version: {{ version }}</small>
                                        </div>
                                        <div class="col-xs-1">
                                            {{#enabled}}
                                            <!--<i class="mdi mdi-checkbox-marked-circle mdi-24px text-success"></i>-->
                                            <img src="../images/icons/checkmark.png" width="32" />
                                            {{/enabled}}
                                            {{^enabled}}
                                            <img src="../images/icons/disabled.png" width="32" />
                                            <!--<i class="mdi mdi-checkbox-marked-circle mdi-24px text-muted"></i>-->
                                            {{/enabled}}
                                        </div>
                                        <div class="col-xs-1">
                                            {{#continueOnError}}
                                            <img src="../images/icons/error.png" width="32" />
                                            <!--<i class="mdi mdi-alert-circle mdi-24px text-danger"></i>-->
                                            {{/continueOnError}}
                                            {{^continueOnError}}
                                            <img src="../images/icons/error-disabled.png" width="32" />
                                            <!--<i class="mdi mdi-alert-circle mdi-24px text-muted"></i>-->
                                            {{/continueOnError}}
                                        </div>
                                    </div>
                                    {{/steps}}
                                </div>
                            </div>
                            {{/deploymentPhases}}
                        </div>
                        {{/environments}}
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <!-- At a glance -->
                <div class="card">
                    <h2>At a glance</h2>
                    <div class="row text-center">
                        <div class="col-xs-4">
                            <div class="text-center">
                                <img src="../images/icons/environments.png" width="32" />  2
                            </div>
                            <div class="text-center">Environments</div>
                        </div>
                        <div class="col-xs-4">
                            <div class="text-center">
                                <img src="../images/icons/tasks.png" width="32" />  2
                            </div>
                            <div class="text-center">Tasks</div>
                        </div>
                        <div class="col-xs-4">
                            <div class="text-center">
                                <img src="../images/icons/variables.png" width="32" />  2
                            </div>
                            <div class="text-center">Variables</div>
                        </div>
                    </div>
                    <div class="row text-center">
                        <div class="col-xs-4">
                            <div class="text-center">
                                <img src="../images/icons/phases.png" width="32" />  2
                            </div>
                            <div class="text-center">Phases</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h2>Created by</h2>
                    <p>
                        <img src="../images/icons/user.png" width="32" /> {{creationInformation.createdBy}}
                    </p>
                    <p>
                        <img src="../images/icons/email.png" width="32" />  {{creationInformation.createdByEmail}}
                    </p>
                    <p>
                        <img src="../images/icons/time.png" width="32" />{{creationInformation.createdOn}}
                    </p>
                </div>
                <div class="card">
                    <h2>Modified by</h2>
                    <p>
                        <img src="../images/icons/user.png" width="32" /> {{modificationInformation.modifiedBy}}
                    </p>
                    <p>
                        <img src="../images/icons/email.png" width="32" /> {{modificationInformation.modifiedByEmail}}
                    </p>
                    <p>
                        <img src="../images/icons/time.png" width="32" /> {{modificationInformation.modifiedOn}}
                    </p>
                </div>
                <div class="card">
                    <h2>Artifacts</h2>
                    {{#artifacts}}
                    <div class="row">
                        <div class="col-xs-12">
                            <img src="../images/icons/build.png" width="32" /> Artifact type: Build
                        </div>
                        <div class="col-xs-12">
                            <img src="../images/icons/artifact.png" width="32" /> {{artifactAlias}}
                        </div>
                        <div class="col-xs-12">
                            <img src="../images/icons/project.png" width="32" />   {{project}}
                        </div>
                        <div class="col-xs-12">
                            <img src="../images/icons/source.png" width="32" />  {{source}}
                        </div>
                        <div class="col-xs-12">
                            <img src="../images/icons/version.png" width="32" /> {{defaultVersion}}
                        </div>
                    </div>
                    {{/artifacts}}
                </div>
                <div class="card">
                    <h2>Triggers</h2>
                    {{#isTriggerSetupForReleaseDefinition}}
                    {{#triggers}}
                    <div class="row">
                        <div class="col-xs-12">
                            <img src="../images/icons/artifact.png" width="32" />  {{artifactAlias}}
                        </div>
                        <div class="col-xs-12">
                            {{#isTriggerTypeContinuousDeployment}}
                            <img src="../images/icons/continuous-delivery.png" width="32" /> Continuous deployment
                            {{/isTriggerTypeContinuousDeployment}}
                            {{#isTriggerTypePullRequest}}
                            <img src="../images/icons/pull-request.png" width="32" />   Pull request
                            {{/isTriggerTypePullRequest}}
                        </div>
                        {{#triggerConditions}}
                        <div class="col-xs-12">
                            <img src="../images/icons/code.png" width="32" /> Branch: {{sourceBranch}}
                        </div>
                        <div class="col-xs-12">
                            <img src="../images/icons/source.png" width="32" /> Use build definition branch: {{useBuildDefinitionBranch}}
                        </div>
                        {{/triggerConditions}}
                    </div>
                    {{/triggers}}
                    {{/isTriggerSetupForReleaseDefinition}}
                    {{^isTriggerSetupForReleaseDefinition}}
                    <p>No continuous deployment setup for this release pipeline</p>
                    {{/isTriggerSetupForReleaseDefinition}}
                </div>
                <div>
                    <!-- Trigger the modal with a button -->
                    {{#doVariablesExists}}
                    <button type="button" class="btn button-inverse" data-toggle="modal" data-target="#releaseDefVariables">Variables</button>
                    {{/doVariablesExists}}
                    <!-- Variables modal -->
                    <div id="releaseDefVariables" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h3 class="modal-title">Variables</h3>
                                </div>
                                <div class="modal-body">
                                    <div class="row modal-table-header bg-gradient">
                                        <div class="col-xs-3">
                                            Name
                                        </div>
                                        <div class="col-xs-3">
                                            Value
                                        </div>
                                        <div class="col-xs-3">
                                            Scope
                                        </div>
                                    </div>
                                    {{#variables}}
                                    <div class="row modal-table-row">
                                        <div class="col-xs-3">
                                            {{ key }}
                                        </div>
                                        <div class="col-xs-3">
                                            {{ value }}
                                        </div>
                                        <div class="col-xs-3">
                                            {{ scope }}
                                        </div>
                                    </div>
                                    {{/variables}}
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn button-dark" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>